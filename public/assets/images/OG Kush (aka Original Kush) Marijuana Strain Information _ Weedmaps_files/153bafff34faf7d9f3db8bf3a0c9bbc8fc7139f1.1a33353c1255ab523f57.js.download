(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[39,200],{DT56:function(e,t,n){var r=n("yNUO");e.exports=function(e,t){var n=r(e).getTime(),a=r(t).getTime();return n<a?-1:n>a?1:0}},HDSO:function(e,t,n){"use strict";n.d(t,"a",(function(){return s})),n.d(t,"c",(function(){return l})),n.d(t,"b",(function(){return d}));var r=n("iAbh"),a=n("b8ws"),o=n.n(a),c=n("kO/G"),i=n("cuWo"),s=function(e,t){if(t){var n=Object(c.d)(t);return o()(new Date,n)>=e}return!1},u=function(e){var t=new r.b;return(parseInt(t.getInLocal("wm.maxConfirmedAge"),10)||0)>=e},l=function(e,t,n){if(!e||!e.has_age_gate)return!1;var r=e.min_age||0,a=n&&u(r)&&!s(r,n);return!((function(e){return Object(i.a)(e)}(t)||u(r)||s(r,n))&&!a)},d=function(e){var t=new r.b,n=parseInt(t.getInLocal("wm.maxConfirmedAge"),10);n&&n>=e||t.setInLocal("wm.maxConfirmedAge",e.toString())}},Kpyc:function(e,t,n){var r=n("yNUO");e.exports=function(e,t){var n=r(e),a=r(t);return n.getFullYear()-a.getFullYear()}},VBar:function(e,t,n){var r=n("yNUO");e.exports=function(e){var t=r(e),n=t.getFullYear(),a=t.getMonth(),o=new Date(0);return o.setFullYear(n,a+1,0),o.setHours(0,0,0,0),o.getDate()}},b8ws:function(e,t,n){var r=n("yNUO"),a=n("Kpyc"),o=n("DT56");e.exports=function(e,t){var n=r(e),c=r(t),i=o(n,c),s=Math.abs(a(n,c));return n.setFullYear(n.getFullYear()-i*s),i*(s-(o(n,c)===-i))}},cuWo:function(e,t,n){"use strict";var r=new RegExp("bot|baiduspider|twitterbot|redditbot|facebookexternalhit|rogerbot|linkedinbot|embedly|quora link preview|showyoubot|outbrain|pinterest|slackbot|vkShare|W3C_Validator|googlebot|googlebot-mobile|google-structureddatatestingtool|applebot|telegrambot|whatsapp|prerender|STC-Bot","i");t.a=function(e){return r.test(e)}},d6If:function(e,t,n){"use strict";n.d(t,"b",(function(){return I})),n.d(t,"f",(function(){return K})),n.d(t,"a",(function(){return ee})),n.d(t,"e",(function(){return ae})),n.d(t,"d",(function(){return ce})),n.d(t,"c",(function(){return pe}));var r=n("q1tI"),a=n.n(r),o=n("JRPe"),c=n("dv3O"),i=n("B2Mi"),s=n("hhr+"),u=n("jT3O"),l=n("vOnD"),d=n("+IKJ"),f=n("5py3"),p=n("cOwK"),g=n("4NT8"),m=n("t98M");function h(){var e=Object(u.a)(["\n    min-height: ",";\n  "]);return h=function(){return e},e}function b(){var e=Object(u.a)(["\n    margin-top: 0;\n  "]);return b=function(){return e},e}var v=Object(l.default)(m.b).withConfig({displayName:"styled-components__DateDropdowns",componentId:"sc-48ajcu-0"})(["margin-top:",";","{",";}"],Object(d.g)(16),m.a,Object(d.c)()),O=Object(l.default)(c.Flex).withConfig({displayName:"styled-components__ModalFooter",componentId:"sc-48ajcu-1"})(["width:100%;margin-top:",";button{text-transform:none;width:100%;}"],Object(d.g)(32)),j=l.default.div.withConfig({displayName:"styled-components__BlurBackground",componentId:"sc-48ajcu-2"})(["filter:blur(20px);opacity:0.25;"]),y=l.default.div.withConfig({displayName:"styled-components__AgeGateSubText",componentId:"sc-48ajcu-3"})(["color:",";max-width:",";padding-top:",";text-align:center;"],g.a.colors.sharkskin,Object(d.g)(380),Object(d.g)(16)),w=Object(l.default)(f.a).withConfig({displayName:"styled-components__AgeGateModalContent",componentId:"sc-48ajcu-4"})(["display:flex;height:100%;flex-direction:column;justify-content:space-between;padding-top:0;h3{font-size:",";font-weight:600;}"],Object(d.g)(32)),x=Object(l.default)(f.c).withConfig({displayName:"styled-components__NoBorderTitle",componentId:"sc-48ajcu-5"})(["border-bottom:none;~ ","{height:calc(100% - ",");}"],w,Object(d.g)(64)),C=l.default.p.withConfig({displayName:"styled-components__BirthdayDescription",componentId:"sc-48ajcu-6"})(["max-width:",";text-align:center;color:",";margin-top:",";",";"],Object(d.g)(300),g.a.colors.nobel,Object(d.g)(16),p.a.medium(b())),D=Object(l.default)(c.Flex).withConfig({displayName:"styled-components__InfoHeader",componentId:"sc-48ajcu-7"})(["position:relative;mark{width:100%;}"]),S=Object(l.default)(c.Flex).withConfig({displayName:"styled-components__SuccessCircle",componentId:"sc-48ajcu-8"})(["justify-content:center;align-items:center;background-color:",";width:",";height:",";margin-bottom:",";border-radius:50%;"],g.a.colors.teal,Object(d.g)(64),Object(d.g)(64),Object(d.g)(16)),k=Object(l.default)(c.Flex).withConfig({displayName:"styled-components__UpdateSuccessContent",componentId:"sc-48ajcu-9"})(["justify-content:center;flex-direction:column;align-items:center;width:100%;min-height:calc(100vh - ",");",";"],Object(d.g)(80),p.a.medium(h(),Object(d.g)(376))),A=a.a.createElement,I=Object(o.g)((function(e){var t=e.logoWidth,n=void 0===t?60:t,r=e.logoHeight,u=void 0===r?60:r,l=e.minAge,d=e.onConfirm,f=e.onReject,p=e.intl.messages,g=p.areYouOldEnough,m=p.confirmLong,h=p.denyLong,b=e.subText,v=void 0===b?"":b;return A(a.a.Fragment,null,A(c.Flex,{flexDirection:"column",alignItems:"center",mb:32},A(c.Box,{mt:16,mb:24},A(i.a,{width:"".concat(n),height:"".concat(u),fillSmile:"black"})),A("h3",{id:"areYouOldEnough"},A(o.b,{id:"areYouOldEnough",defaultMessage:g,values:{minAge:l}})),v&&A(y,null,v)),A(O,{justifyContent:"flex-end",flexDirection:"row-reverse",flexWrap:"wrap",key:"confirm-age-footer"},A(c.Box,{width:[1,.5],mb:["8px",0]},A(s.a,{onClick:d,state:"primary","data-test-id":"age-gate-confirm-accept","aria-describedby":"areYouOldEnough"},m)),A(c.Box,{width:[1,.5],pr:[0,"8px"]},A(s.a,{onClick:f,"aria-describedby":"areYouOldEnough"},h))))})),_=n("vJKn"),R=n.n(_),Y=n("rg98"),N=n("H+61"),E=n("UlJF"),F=n("7LId"),M=n("VIvw"),B=n("iHvq"),U=n("z3Q8"),T=n("cPJV"),J=n.n(T),L=n("b8ws"),z=n.n(L),H=a.a.createElement;function q(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.a)(e);if(t){var a=Object(B.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(M.a)(this,n)}}var P=function(e){Object(F.a)(n,e);var t=q(n);function n(){var e;Object(N.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={saving:!1,error:"",selectedDate:null},e.dismissError=function(){e.setState({error:""})},e.dateUpdated=function(t){e.setState({selectedDate:t})},e.onSave=Object(Y.a)(R.a.mark((function t(){var n,r;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state.selectedDate){t.next=3;break}return t.abrupt("return");case 3:return e.setState({saving:!0}),t.next=6,e.props.onSave({dob:J()(n,"YYYY-MM-DD")});case 6:(r=t.sent)&&e.setState({error:r,saving:!1});case 8:case"end":return t.stop()}}),t)}))),e.saveDisabled=function(){var t=e.state,n=t.selectedDate,r=t.saving,a=e.props.minAge;return r||!n||z()(new Date,n)<a||J()(n,"YYYY-MM-DD")===e.props.dob},e}return Object(E.a)(n,[{key:"render",value:function(){var e=this.props.intl.messages,t=this.state,n=t.saving,r=t.error,o=t.selectedDate,u=this.onSave,l=this.saveDisabled;return H(a.a.Fragment,null,H(c.Flex,{flexDirection:"column"},H(D,{flexDirection:"column",alignItems:"center"},H(U.b,{"data-test-id":"update-age-error",error:r,onDismiss:this.dismissError}),H(c.Box,{mt:[0,16],mb:[0,24]},H(i.a,{width:"60",height:"60",fillSmile:"black"})),H("h3",null,e.enterBirthday)),H(v,{startDate:o||this.props.dob,onChange:this.dateUpdated}),H(c.Flex,{justifyContent:"center"},H(c.Box,null,H(C,null,e.enterBirthdayDescription)))),H(O,{justifyContent:"flex-end",flexWrap:"wrap",key:"update-age-footer"},H(c.Box,{width:[1],pr:[0,8]},H(s.a,{state:"primary",onClick:u,disabled:l()},n?"".concat(e.saving,"\u2026"):e.submit))))}}]),n}(r.Component),K=Object(o.g)(P),V=n("mwIZ"),W=n.n(V),G=n("HDSO"),Q=n("kMSe"),X=a.a.createElement;function Z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.a)(e);if(t){var a=Object(B.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(M.a)(this,n)}}var $=function(e){Object(F.a)(n,e);var t=Z(n);function n(){var e;Object(N.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={showAgeUpdate:!1,updateSuccess:!1},e.closeModal=function(t){var n=e.props,r=n.reject,a=n.confirm,o=n.minAge;e.state.showAgeUpdate||t?(Object(G.b)(o),a()):r()},e.updateAge=function(){var t=Object(Y.a)(R.a.mark((function t(n){var r,a,o,c;return R.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.auth,t.prev=1,t.next=4,r.updateUser(n);case 4:return e.setState({updateSuccess:!0}),t.abrupt("return",!1);case 8:return t.prev=8,t.t0=t.catch(1),t.next=12,t.t0.response.json();case 12:return a=t.sent,o=a.errors,c=W()(o[0],"detail",""),t.abrupt("return",c);case 16:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),e.getUpdateView=function(){var t=e.state.updateSuccess,n=e.props.auth;return t?X(ae,{onSuccessClick:e.closeModal}):X(K,{dob:n.user&&n.user.dob,onSave:e.updateAge,minAge:e.props.minAge,onCancel:e.closeModal})},e.confirmAge=function(){var t=e.props,n=t.auth,r=t.minAge;n.user&&!Object(G.a)(r,n.user.dob||"")?e.setState((function(){return{showAgeUpdate:!0}})):e.closeModal(!0)},e}return Object(E.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.minAge,r=t.auth,a=this.state,o=a.updateSuccess,c=a.showAgeUpdate;return X(f.f,{overlayKey:"age-gate-modal",isOpen:!0,contentStyle:{padding:0,overflowY:"hidden"},onClose:this.closeModal,closeOnOverlayClick:o,width:424,closeOnEsc:o},!(o||c)&&X(x,{onClose:function(){e.closeModal()}}),X(w,{flexDirection:"column",justifyContent:"space-between"},this.state.showAgeUpdate&&r&&r.user?this.getUpdateView():X(I,{minAge:n,onConfirm:this.confirmAge,onReject:this.props.reject})))}}]),n}(r.Component),ee=Object(Q.d)("auth")(Object(Q.e)($)),te=n("LQ7/"),ne=n("l35S"),re=a.a.createElement,ae=Object(o.g)((function(e){var t=e.onSuccessClick,n=e.intl.messages;return re(te.a,{cursor:"pointer",onTouch:t,"aria-label":n.updateSuccessMessage},re(k,null,re(S,null,re(ne.b,{size:32,fill:g.a.colors.white})),re("h3",null,n.updateSuccessMessage)))})),oe=a.a.createElement,ce=Object(o.g)((function(e){return oe(c.Flex,{flexDirection:"column",alignItems:"center",mb:32},oe(c.Box,{mt:16,mb:24},oe(i.a,{width:"128",height:"128",fillSmile:"black"})),oe("h3",null,e.intl.messages.sorry),oe(y,null,e.intl.messages.notOldEnough))})),ie=n("p46w"),se=n.n(ie),ue=n("0DpX"),le=a.a.createElement;function de(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(B.a)(e);if(t){var a=Object(B.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(M.a)(this,n)}}var fe=function(e){Object(F.a)(n,e);var t=de(n);function n(){var e;Object(N.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={notOldEnough:!1,userAge:e.props.confirmedAge},e.needsAgeCheck=function(){var t=e.props.location.ageRequirement,n=e.state.userAge;return t>0&&t>n},e.onConfirm=function(){var t=e.props.location.ageRequirement;se.a.set("wm.maxConfirmedAge",t,{expires:30});var n=se.a.get("wm.maxConfirmedAge");e.setState({userAge:parseInt(n,10)})},e.onReject=function(){e.setState({notOldEnough:!0})},e}return Object(E.a)(n,[{key:"render",value:function(){var e=this.props,t=e.location.ageRequirement,n=e.children,r=e.intl.messages.canadaAgeGate;return this.needsAgeCheck()?le(j,null,n,le(f.f,{isOpen:!0,whiteBackground:!0,onClose:ue.a},le(w,null,this.state.notOldEnough?le(ce,null):le(I,{minAge:t,logoWidth:128,logoHeight:128,onConfirm:this.onConfirm,onReject:this.onReject,subText:r})))):n}}]),n}(r.Component),pe=Object(Q.d)("location")(Object(o.g)(Object(Q.e)(fe)))},t98M:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var r=n("HALo"),a=n("xvhg"),o=n("dhJC"),c=n("q1tI"),i=n.n(c),s=n("JRPe"),u=n("VBar"),l=n.n(u),d=n("dv3O"),f=n("vOnD"),p=n("+IKJ"),g=n("4NT8"),m=i.a.createElement,h=f.default.label.withConfig({displayName:"date-selector__Label",componentId:"sc-10y5427-0"})(["font-weight:600;font-size:",";line-height:",";margin-bottom:",";"],Object(p.g)(16),Object(p.g)(24),Object(p.g)(8)),b="data:image/svg+xml;utf8,<svg xmlns='http://www.w3.org/2000/svg' version='1.1' width='25' height='25' viewBox='0 0 451.847 451.847'><path fill='".concat(g.a.colors.nobel,"' d='M225.923 354.706c-8.098 0-16.195-3.092-22.37-9.263L9.27 151.157c-12.36-12.36-12.36-32.397 0-44.75 12.354-12.355 32.388-12.355 44.748 0L225.923 278.32 397.83 106.413c12.358-12.354 32.39-12.354 44.743 0 12.365 12.354 12.365 32.392 0 44.75L248.293 345.45c-6.178 6.17-14.275 9.256-22.37 9.256z'/></svg>"),v=f.default.select.withConfig({displayName:"date-selector__Select",componentId:"sc-10y5427-1"})(['background-image:url("','");padding-right:',";background-position:right -"," center;background-size:9px;"],b,Object(p.g)(32),Object(p.g)(16));t.b=Object(s.g)((function(e){var t=e.intl.messages,n=e.startDate,i=void 0===n?"":n,s=e.onChange,u=e.offsetYears,f=void 0===u?18:u,p=Object(o.a)(e,["intl","startDate","onChange","offsetYears"]),g=i?i.split("-").map((function(e,t){return 1===t?parseInt(e,10)-1:parseInt(e,10)})):new Array(3).fill(-1),b=Object(a.a)(g,3),O=b[0],j=b[1],y=b[2],w=Object(c.useState)(-1),x=w[0],C=w[1],D=Object(c.useState)(-1),S=D[0],k=D[1],A=Object(c.useState)(-1),I=A[0],_=A[1],R=j;-1!==x&&(R=x);var Y=y;-1!==S&&(Y=S);var N=O;-1!==I&&(N=I);var E=function(e){var t=e.target,n=t.value,r=parseInt(n,10);if(!Number.isNaN(r))switch(t.name){case"selectedMonth":!function(e){if(-1!==Y&&-1!==N){var t=new Date(N,e,Y);s(t.toISOString()),C(e)}else C(e)}(r);break;case"selectedDay":!function(e){if(-1!==R&&-1!==N){var t=new Date(N,R,e);s(t.toISOString()),k(e)}else k(e)}(r);break;case"selectedYear":!function(e){if(-1!==Y&&-1!==R){var t=new Date(e,R,Y);s(t.toISOString()),_(e)}else _(e)}(r)}},F=[{text:"- ".concat(t.month," -")}].concat(Array.from({length:12}).map((function(e,n){return{value:n,text:"".concat((n+1).toString().length<2?0:"").concat(n+1," - ").concat(t.monthsOfTheYear[n])}}))),M=[{text:"- ".concat(t.year," -")}].concat(Array.from({length:100}).map((function(e,t){var n=(new Date).getFullYear()-f-t;return{value:n,text:"".concat(n)}}))),B=[{text:"- ".concat(t.day," -")}].concat(Array.from({length:l()(new Date(N||2e3,R||0))}).map((function(e,t){return{value:t+1,text:"".concat(t+1)}})));return m(d.Flex,Object(r.a)({flexDirection:["column","row"]},p),m(d.Box,{width:[1,"auto"],flex:["auto",1],mr:[0,2]},m(h,{htmlFor:"MonthSelect"},t.month),m(v,{name:"selectedMonth",onChange:E,value:R,id:"MonthSelect"},F.map((function(e){return m("option",{key:e.text,value:e.value},e.text)})))),m(d.Box,{width:[1,"auto"],mr:[0,2]},m(h,{htmlFor:"DateSelect"},t.day),m(v,{name:"selectedDay",onChange:E,value:Y,id:"DateSelect"},B.map((function(e){return m("option",{key:e.text,value:e.value},e.text)})))),m(d.Box,{width:[1,"auto"]},m(h,{htmlFor:"YearSelect"},t.year),m(v,{name:"selectedYear",onChange:E,value:N,id:"YearSelect"},M.map((function(e){return m("option",{key:e.text,value:e.value},e.text)})))))}))},z3Q8:function(e,t,n){"use strict";n.d(t,"a",(function(){return x}));var r=n("H+61"),a=n("UlJF"),o=n("7LId"),c=n("VIvw"),i=n("iHvq"),s=n("dv3O"),u=n("jhNz"),l=n("CZzd"),d=n("0DpX"),f=n("4NT8"),p=n("+IKJ"),g=n("q1tI"),m=n.n(g),h=n("JRPe"),b=n("vOnD"),v=m.a.createElement;function O(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Object(i.a)(e);if(t){var a=Object(i.a)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Object(c.a)(this,n)}}var j=f.a.colors,y=j.pink,w=j.white,x=Object(b.default)(s.Flex).attrs({as:"mark"}).withConfig({displayName:"dismissable-error__Error",componentId:"m7op02-0"})(["flex-direction:row;align-items:flex-start;justify-content:space-between;background:",";color:",";left:0;position:absolute;right:0;transform:scaleY(0);transform-origin:top;transition:transform 300ms ease-in-out;visibility:hidden;&:first-letter,> div:first-letter{text-transform:uppercase;}> div{font-size:",";line-height:",";padding:"," 0 "," ",";}a{color:#fff;text-decoration:underline;}&.visible{visibility:visible;position:static;transform:scaleY(1);}"],y,w,Object(p.g)(14),Object(p.g)(18),Object(p.g)(14),Object(p.g)(14),Object(p.g)(16)),C=Object(b.default)(s.Flex).attrs({as:"button"}).withConfig({displayName:"dismissable-error__ErrorClose",componentId:"m7op02-1"})(["align-items:center;justify-content:center;cursor:pointer;height:",";padding:",";transition:opacity 300ms ease-in-out;width:",";svg{cursor:pointer;}"],Object(p.g)(46),Object(p.g)(16),Object(p.g)(44)),D=function(e){Object(o.a)(n,e);var t=O(n);function n(){return Object(r.a)(this,n),t.apply(this,arguments)}return Object(a.a)(n,[{key:"render",value:function(){var e=this.props,t=e.error,n=e.intl;return v(x,{className:t?"visible":"","aria-hidden":!t},v(l.a,{html:t,allowedTags:["a"],allowedAttributes:{a:["href"]}}),v(C,{onClick:this.props.onDismiss,"data-test-id":"dismissable-error-close"},v(u.a,{size:10,"aria-label":n.messages.dismissError,fill:w})))}}]),n}(g.Component);D.defaultProps={error:"",onDismiss:d.a},t.b=Object(h.g)(D)}}]);